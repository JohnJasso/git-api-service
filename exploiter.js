const EventEmitter = require('events')
const fetch = require("node-fetch");


const baseURL =  'https://api.github.com/';

// class Exploiter extends EventEmitter {
//     printURL() {
//         console.log('URL: ' + BaseURL)
//         this.emit('gotURL', { id: 1, url: 'thisurl.com'})
//         // this.emit("gotURL", "thisisurl.com ");
//     }
// }

async function searchRepos(search_term) {
    const url = new URL(`${baseURL}search/repositories?q=${search_term}`);
    try {
      const response = await fetch(url);
      const json = await response.json();
    } catch (error) {
      console.log('Server error: ', error);
    }
}

async function listStars(user_name) {
    const url = new URL(`${baseURL}users/${user_name}/starred`);
    console.log('URL:', url)
    try {
      const response = await fetch(url);
      const json = await response.json();
      console.log('Resp stars: ', json);
    } catch (error) {
      console.log("Server error: ", error);
    }
}

module.exports.search = searchRepos;
module.exports.list = listStars;